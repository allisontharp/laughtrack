<app-headerbar (newItemEvent)="searchBar($event)"></app-headerbar>

<h2 style="margin-left: 20px; margin-top: 25px;">&nbsp;Movies</h2>
<br>
<div>
  <div class="jumbotron">
    <!-- Filter Bar -->
    <div class="d-inline-block" style="margin-bottom: 1%; ">
      <div class="dropdown" style="display: inline; margin-right:1rem">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="watchedDropDown" data-toggle="dropdown"
          aria-haspopup="true" aria-expanded="false">
          All Movies:
        </button>
        <div class="dropdown-menu border-secondary" aria-labelledby="watchedDropDown">
          <a class="dropdown-item" (click)="setFilterStatus('watched', 'hasWatched')">Watched</a>
          <a class="dropdown-item" (click)="setFilterStatus('watched', 'notWatched')">Not Watched</a>
          <a class="dropdown-item" (click)="setFilterStatus('watched', undefined)">Both</a>
        </div>
      </div>
      <div class="dropdown" style="display: inline;margin-right:1rem">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="watchedDropDown" data-toggle="dropdown"
          aria-haspopup="true" aria-expanded="false">
          Sort:
        </button>
        <div class="dropdown-menu border-secondary" aria-labelledby="watchedDropDown">
          <a class="dropdown-item" (click)="setSortByName('title', 'asc')">Title: Ascending</a>
          <a class="dropdown-item" (click)="setSortByName('title', 'desc')">Title: Descending</a>
          <a class="dropdown-item" (click)="setSortByName('AFI100LaughsRank', 'asc')">AFI Laughs: Ascending</a>
          <a class="dropdown-item" (click)="setSortByName('AFI100LaughsRank', 'desc')">AFI Laughs: Descending</a>
          <a class="dropdown-item" (click)="setSortByName('year', 'asc')">Year: Ascending</a>
          <a class="dropdown-item" (click)="setSortByName('year', 'desc')">Year: Descending</a>
        </div>
      </div>
      <div class="dropdown" style="display: inline;margin-right:1rem">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="watchedDropDown" data-toggle="dropdown"
          aria-haspopup="true" aria-expanded="false">
          Category:
        </button>
        <div class="dropdown-menu border-secondary" aria-labelledby="watchedDropDown">
          <a class="dropdown-item" (click)="setFilterStatus('tags','AFI100Laughs')">AFI 100 Laughs</a>
          <a class="dropdown-item" (click)="setFilterStatus('tags','WantToWatch')">Want To Watch</a>
          <a class="dropdown-item" (click)="setFilterStatus('tags','AcademyAwardBestPicture')">Academy Award Best Picture</a>
          <a class="dropdown-item" (click)="setFilterStatus('tags',undefined)">All</a>
        </div>
      </div>
      <div class="dropdown" style="display: inline;margin-right:1rem">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="watchedDropDown" data-toggle="dropdown"
          aria-haspopup="true" aria-expanded="false">
          Exclude:
        </button>
        <div class="dropdown-menu border-secondary" aria-labelledby="watchedDropDown">
          <a class="dropdown-item" (click)="setFilterStatus('exclude','AFI100Laughs')">AFI 100 Laughs</a>
          <a class="dropdown-item" (click)="setFilterStatus('exclude','WantToWatch')">Want To Watch</a>
          <a class="dropdown-item" (click)="setFilterStatus('exclude','AcademyAwardBestPicture')">Academy Award Best Picture</a>
          <a class="dropdown-item" (click)="setFilterStatus('exclude','')">None</a>
        </div>
      </div>
      <button class="btn btn-outline-secondary"  (click)="clearFilters()">Clear</button>

    </div><!-- !filterBar -->

    <!-- Card Stack -->
    <div class="card-deck" style="justify-content: left">
      <div *ngFor="let m of movies 
      | filter:{watched: filters.get('watched'), title: filters.get('title'), year: filters.get('year'), genres: filters.get('genres'), director: filters.get('director'), writer: filters.get('writer'), stars: filters.get('stars'), tags: filters.get('tags')} 
      | exclude:{tags: filters.get('exclude')}
      | sort:sortDirection:sortByName">
        <app-movie-card [movie]="m" [showTags]=false></app-movie-card>
      </div>
    </div> <!-- !cardStack -->
  </div>
</div>